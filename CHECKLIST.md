# ✅ 项目启动检查清单

使用此清单确保项目配置正确，避免启动问题。

## 📋 环境检查

在开始之前，请确认以下环境已安装：

```bash
# 检查 Java 版本（需要 17+）
java -version

# 检查 Maven 版本（需要 3.6+）
mvn -version

# 检查 MySQL 版本（需要 8.0+）
mysql --version

# 检查 Node.js 版本（需要 14+）
node -version

# 检查 npm 版本
npm -version
```

---

## 🗄️ 数据库检查清单

### 1. MySQL 服务状态
- [ ] MySQL 服务已启动
- [ ] 可以正常连接到 MySQL

### 2. 数据库创建
- [ ] 数据库 `home_ordering` 已创建
- [ ] 数据库字符集为 `utf8mb4`

### 3. 数据表检查
运行以下SQL验证表是否创建成功：
```sql
USE home_ordering;
SHOW TABLES;
-- 应该看到 3 个表: dish, order, order_detail

SELECT COUNT(*) FROM dish;
-- 应该返回 6（示例菜品数量）
```

- [ ] `dish` 表存在且有数据
- [ ] `order` 表存在
- [ ] `order_detail` 表存在

---

## ⚙️ 后端配置检查清单

### 1. 配置文件检查
编辑 `backend/src/main/resources/application.properties`

```properties
# 检查这些配置项
spring.datasource.username=root          # 确认用户名正确
spring.datasource.password=root          # 确认密码正确
file.upload.path=E:/Code/...../uploads/  # 确认路径存在且有写权限
```

- [ ] 数据库用户名已修改
- [ ] 数据库密码已修改
- [ ] 文件上传路径已设置且目录存在

### 2. 依赖下载
```bash
cd backend
mvn clean install
```

- [ ] Maven 依赖下载成功
- [ ] 编译无错误

### 3. 启动测试
```bash
mvn spring-boot:run
```

检查启动日志：
- [ ] 看到 "家庭点餐系统启动成功！"
- [ ] 没有错误日志
- [ ] 端口 8080 已监听

### 4. 接口测试
浏览器访问: http://localhost:8080/api/dish/list

期望结果：
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "name": "宫保鸡丁",
      ...
    }
  ]
}
```

- [ ] 接口返回 200
- [ ] 返回了菜品数据

---

## 📱 前端配置检查清单

### 1. 依赖安装
```bash
cd frontend
npm install
```

- [ ] npm 依赖安装成功
- [ ] 无错误提示

### 2. 配置检查
编辑 `frontend/utils/api.js`

```javascript
const BASE_URL = 'http://localhost:8080/api'  // 确认地址正确
```

- [ ] BASE_URL 指向正确的后端地址

### 3. 编译测试
```bash
npm run dev:mp-weixin
```

- [ ] 编译成功
- [ ] 生成了 `dist/dev/mp-weixin` 目录

---

## 🔧 微信开发者工具检查清单

### 1. 工具设置
- [ ] 已安装微信开发者工具
- [ ] 工具版本为最新稳定版

### 2. 项目导入
- [ ] 已导入项目（目录: `frontend/dist/dev/mp-weixin`）
- [ ] AppID 选择为"测试号"或填写了正确的 AppID

### 3. 开发设置（重要！）
点击"详情" → "本地设置"，确认以下设置：

- [ ] ✅ 不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书
- [ ] ✅ 启用开发调试
- [ ] ✅ 不校验安全域名

### 4. 页面显示
- [ ] 模拟器显示了小程序界面
- [ ] 底部有 4 个 tab（点餐、购物车、订单、添加菜品）
- [ ] 控制台无报错

---

## 🧪 功能测试清单

### 基础功能测试

#### 1. 菜品列表
- [ ] 可以看到 6 个示例菜品
- [ ] 菜品显示名称、价格、点单次数
- [ ] 点击 "+" 按钮可以添加到购物车

#### 2. 菜品详情
- [ ] 点击菜品可以进入详情页
- [ ] 可以调整数量
- [ ] "加入购物车" 按钮正常
- [ ] "立即下单" 按钮正常

#### 3. 购物车
- [ ] 可以看到已添加的菜品
- [ ] 可以调整数量（+/-）
- [ ] 可以删除商品
- [ ] 总价计算正确
- [ ] 可以添加备注

#### 4. 创建订单
- [ ] 点击"提交订单"成功
- [ ] 显示"等待老公确认中"提示
- [ ] 自动跳转到订单详情

#### 5. 订单管理
- [ ] 订单列表显示正常
- [ ] 可以按状态筛选
- [ ] "老公确认" 按钮正常
- [ ] 状态更新为 "老公大人已许可"
- [ ] "完成订单" 按钮正常
- [ ] 状态更新为 "已完成"

#### 6. 添加菜品
- [ ] 可以选择图片（相册或拍照）
- [ ] 图片上传成功
- [ ] 填写菜品信息
- [ ] 提交成功
- [ ] 新菜品出现在列表中

---

## 🐛 常见问题检查

### 问题1: 后端启动失败

**症状**: 运行 `mvn spring-boot:run` 报错

**检查项**:
- [ ] JDK 版本是否为 17+
- [ ] MySQL 服务是否启动
- [ ] 数据库连接信息是否正确
- [ ] 端口 8080 是否被占用

**解决方法**:
```bash
# 检查端口占用
netstat -ano | findstr :8080

# 杀掉占用进程（Windows）
taskkill /F /PID <进程ID>
```

### 问题2: 前端无法获取数据

**症状**: 小程序显示空白或无数据

**检查项**:
- [ ] 后端是否已启动
- [ ] 网络请求地址是否正确
- [ ] 微信开发者工具是否关闭域名校验
- [ ] 控制台是否有错误信息

### 问题3: 图片上传失败

**症状**: 点击上传图片后失败

**检查项**:
- [ ] 上传目录是否存在
- [ ] 目录是否有写权限
- [ ] 后端服务是否正常
- [ ] 文件大小是否超过限制（10MB）

**解决方法**:
```bash
# 创建上传目录（Windows）
mkdir E:\Code\WeChatMiniProgram\HomeOrdering\backend\uploads

# 检查配置文件中的路径
# application.properties: file.upload.path
```

### 问题4: 编译错误

**症状**: Maven 或 npm 编译报错

**检查项**:
- [ ] 网络连接是否正常
- [ ] Maven 仓库源是否可用
- [ ] npm 源是否可用

**解决方法**:
```bash
# 使用国内 Maven 源（在 pom.xml 中配置）
# 使用淘宝 npm 源
npm config set registry https://registry.npmmirror.com
```

---

## ✨ 性能检查（可选）

### 后端性能
- [ ] 接口响应时间 < 100ms
- [ ] 数据库查询无慢查询
- [ ] 内存占用正常（< 500MB）

### 前端性能
- [ ] 页面加载流畅
- [ ] 无明显卡顿
- [ ] 图片加载正常

---

## 📊 检查通过标准

✅ **基础通过**: 
- 后端正常启动
- 前端正常显示
- 可以查看菜品列表

✅ **完整通过**:
- 所有基础功能测试通过
- 可以创建订单
- 可以上传图片
- 订单状态流转正常

---

## 🎉 全部检查通过？

恭喜！您可以开始愉快地使用本项目了！

**下一步建议**:
1. 📖 阅读 `README.md` 了解更多功能
2. 🎨 自定义样式和主题
3. 📝 根据需求添加新功能

**需要帮助？**
- 查看 `QUICKSTART.md` 快速启动指南
- 查看 `PROJECT_SUMMARY.md` 项目总结
- 查看各目录下的 `README.md`

---

**检查完成日期**: ________________  
**检查人**: ________________  
**问题记录**: ________________
